# Flow Farm 员工客户端 GUI

## 概述

Flow Farm 员工客户端是一个现代化的图形界面应用程序，专为员工用户设计，提供设备管理和自动化功能操作。

## 功能特性

### 🔐 用户认证
- **安全登录**: 支持用户名/密码登录认证
- **记住密码**: 可选择记住登录信息
- **服务器配置**: 灵活配置服务器连接地址
- **自动重连**: 连接断开时自动重连机制

### 📱 设备管理模块

#### 设备连接
- **支持最多10台设备同时连接**
- **实时显示设备连接状态**：
  - 未连接 (灰色)
  - 连接中 (橙色)
  - 已连接 (绿色)
  - 工作中 (蓝色)
  - 错误 (红色)

#### 设备控制
- **一键刷新**: 自动发现可用设备
- **批量连接**: 一键连接所有可用设备
- **批量断开**: 一键断开所有已连接设备
- **设备重命名**: 为设备设置易识别的名称
- **自动监控**: 实时监控设备状态和任务完成情况

#### 设备信息
- **设备列表视图**: 表格形式显示所有设备信息
- **详细信息面板**: 显示选中设备的详细状态
- **任务统计**: 显示每台设备完成的任务数量
- **连接历史**: 记录设备最后连接时间

### ⚙️ 功能界面模块

#### 1. 关注通讯录用户
- **文件选择**: 支持导入 txt、csv、json 格式的通讯录文件
- **数量设置**: 灵活设置要关注的用户数量
- **智能分发**: 自动将关注任务分发给已连接的设备
- **去重机制**: 确保不重复关注同一用户
- **实时进度**: 显示关注任务的执行进度

#### 2. 同行监控
- **账号监控**: 指定要监控的同行账户
- **关键词匹配**: 基于用户提供的关键词库进行评论爬取
- **智能收集**: 自动收集触发关键词的用户ID
- **数据同步**: 将收集的用户信息同步到服务器数据库
- **分散关注**: 将关注目标分散到各个设备执行
- **防重复**: 全局去重，避免重复关注

#### 3. 关注数统计
- **总关注人数**: 显示累计关注的总人数
- **今日新增**: 显示当日新增关注人数
- **成功率统计**: 显示关注操作的成功率
- **余额监控**: 实时显示账户余额
- **费用计算**: 自动计算关注操作的费用
- **余额验证**: 余额不足时阻止提交关注请求

### 📊 任务管理

#### 任务控制
- **暂停/恢复**: 支持任务的暂停和恢复操作
- **停止任务**: 可随时停止正在执行的任务
- **进度显示**: 实时显示任务执行进度
- **状态监控**: 显示任务的详细执行状态

#### 扣费机制
- **按成功关注计费**: 只有成功关注后才进行扣费
- **实时扣费**: 每次成功关注后立即更新余额
- **费用透明**: 明确显示关注单价和总费用
- **余额保护**: 余额不足时自动停止任务

## 界面设计

### 🎨 现代化UI
- **Material Design风格**: 采用现代化的卡片布局和阴影效果
- **响应式设计**: 支持窗口大小调整和不同分辨率适配
- **清晰的视觉层次**: 合理的颜色搭配和字体层级
- **直观的操作反馈**: 即时的状态提示和操作确认

### 🖼️ 布局结构
```
┌─────────────────────────────────────────────┐
│                顶部工具栏                     │
│  Flow Farm 员工工作台  [用户信息]  [登录] [设置]  │
├─────────────────────────────────────────────┤
│                 主内容区域                    │
│  ┌─────────────┐  ┌─────────────────────────┐ │
│  │  设备管理   │  │       功能界面          │ │
│  │            │  │                        │ │
│  │ 设备列表    │  │ 1. 关注通讯录用户       │ │
│  │ 设备控制    │  │ 2. 同行监控            │ │
│  │ 设备详情    │  │ 3. 关注数统计          │ │
│  │            │  │ 4. 任务控制            │ │
│  └─────────────┘  └─────────────────────────┘ │
├─────────────────────────────────────────────┤
│                任务进度面板                   │
│  当前任务: xxx  |  状态: xxx  |  进度: xx%   │
├─────────────────────────────────────────────┤
│                  状态栏                      │
│  就绪  |  已连接: 3/10  |  余额: ¥999.99    │
└─────────────────────────────────────────────┘
```

### 🎯 用户体验
- **一站式管理**: 在单一界面完成所有操作
- **实时反馈**: 所有操作都有即时的状态反馈
- **安全确认**: 重要操作需要用户确认
- **错误处理**: 友好的错误提示和处理机制

## 技术特性

### 🏗️ 架构设计
- **模块化结构**: 清晰的代码组织和模块分离
- **面向对象**: 基于类的设计模式
- **可扩展性**: 易于添加新功能和平台支持
- **可维护性**: 良好的代码注释和文档

### 🔧 技术栈
- **GUI框架**: tkinter + ttk (现代主题)
- **异步处理**: 多线程处理长时间任务
- **数据管理**: 本地配置文件 + 服务器API
- **日志系统**: 完善的日志记录和错误追踪

### 🛡️ 安全性
- **输入验证**: 所有用户输入都经过验证
- **错误处理**: 完善的异常捕获和处理
- **资源管理**: 合理的内存和CPU资源使用
- **数据保护**: 敏感信息的安全存储

## 使用流程

### 启动应用
1. 运行 `python src/main.py --gui`
2. 应用将显示登录界面

### 用户登录
1. 输入服务器地址（默认: http://localhost:8000）
2. 输入用户名和密码
3. 可选择"记住密码"
4. 点击"登录"按钮

### 设备管理
1. 切换到"设备管理"标签页
2. 点击"刷新设备"发现可用设备
3. 选择设备并点击"连接"或双击设备行
4. 查看设备详情和状态

### 执行任务
1. 切换到"功能界面"标签页
2. 选择要执行的功能类型
3. 配置相关参数（文件、数量等）
4. 确认余额充足
5. 点击开始按钮执行任务
6. 监控任务进度和状态

## 开发说明

### 文件结构
```
src/
├── gui/                    # GUI界面模块
│   ├── base_window.py      # 基础窗口和主题
│   ├── main_window.py      # 主窗口
│   └── views/              # 功能视图
│       ├── device_view.py  # 设备管理视图
│       └── function_view.py # 功能界面视图
├── config/                 # 配置管理
├── auth/                   # 认证模块
├── sync/                   # 数据同步
└── utils/                  # 工具模块
```

### 扩展功能
- 支持添加新的自动化平台
- 可以扩展设备类型支持
- 可以添加更多统计和分析功能
- 支持主题定制和界面个性化

## 注意事项

1. **设备连接**: 确保设备已开启USB调试模式
2. **网络连接**: 确保能正常访问服务器地址
3. **余额管理**: 及时关注账户余额，避免任务中断
4. **任务监控**: 定期检查任务执行状态
5. **数据备份**: 重要数据定期备份到服务器

## 故障排除

### 常见问题
1. **无法连接设备**: 检查ADB工具安装和设备USB调试
2. **登录失败**: 检查网络连接和服务器地址
3. **任务执行慢**: 检查设备连接状态和网络质量
4. **界面卡死**: 重启应用程序，检查日志错误信息

### 日志查看
- 日志文件位置: `~/.flow_farm/logs/employee_client.log`
- 启用调试模式: `python src/main.py --gui --debug`
